{
  "metadata": {
    "timestamp": "2025-10-02T20:09:38.101532+00:00",
    "version": "2.1",
    "generatedBy": "AKS Network Diagnostics Script (Python)"
  },
  "cluster": {
    "name": "aks-dns-ex1",
    "resourceGroup": "aks-dns-ex1-rg",
    "subscription": "18fcfcaf-51b0-42c1-91ba-b14fe22f59dd",
    "provisioningState": "Succeeded",
    "location": "canadacentral",
    "nodeResourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral",
    "networkProfile": {
      "advancedNetworking": null,
      "dnsServiceIp": "172.16.0.10",
      "ipFamilies": [
        "IPv4"
      ],
      "loadBalancerProfile": {
        "allocatedOutboundPorts": null,
        "backendPoolType": "nodeIPConfiguration",
        "effectiveOutboundIPs": [
          {
            "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/publicIPAddresses/4c2bc7a9-912c-4e0f-bbb5-fb6f42abf58e",
            "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral"
          }
        ],
        "enableMultipleStandardLoadBalancers": null,
        "idleTimeoutInMinutes": null,
        "managedOutboundIPs": {
          "count": 1,
          "countIpv6": null
        },
        "outboundIPs": null,
        "outboundIpPrefixes": null
      },
      "loadBalancerSku": "standard",
      "natGatewayProfile": null,
      "networkDataplane": "azure",
      "networkMode": null,
      "networkPlugin": "azure",
      "networkPluginMode": null,
      "networkPolicy": "none",
      "outboundType": "loadBalancer",
      "podCidr": null,
      "podCidrs": null,
      "serviceCidr": "172.16.0.0/16",
      "serviceCidrs": [
        "172.16.0.0/16"
      ],
      "staticEgressGatewayProfile": null
    },
    "apiServerAccess": null
  },
  "networking": {
    "vnets": [
      {
        "name": "aks-vnet",
        "resourceGroup": "vnet-aks-dns-ex1-rg",
        "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet",
        "addressSpace": [
          "10.0.0.0/8"
        ],
        "subnets": [],
        "peerings": []
      }
    ],
    "outbound": {
      "type": "loadBalancer",
      "configuredPublicIPs": [
        "52.139.1.180"
      ],
      "effectiveOutbound": {
        "mechanism": "loadBalancer",
        "overridden_by_udr": false,
        "effective_mechanism": "loadBalancer",
        "virtual_appliance_ips": [],
        "load_balancer_ips": [
          "52.139.1.180"
        ],
        "warnings": [],
        "description": "Traffic uses Load Balancer with public IP(s): 52.139.1.180"
      },
      "udrAnalysis": null
    },
    "privateDns": {
      "type": "none",
      "isPrivateCluster": false,
      "privateDnsZone": null,
      "analysis": "No API server access profile found - not a private cluster",
      "vnetDnsServers": [
        "168.63.129.16",
        "1.1.1.1",
        "8.8.8.8"
      ],
      "vnetDnsConfig": "custom"
    },
    "apiServerAccess": {
      "privateCluster": false,
      "authorizedIpRanges": [],
      "disableRunCommand": false,
      "analysis": {
        "ipRangeRestriction": "none"
      },
      "securityFindings": [],
      "accessRestrictions": {}
    },
    "vmssConfiguration": [
      {
        "additionalCapabilities": null,
        "automaticRepairsPolicy": null,
        "constrainedMaximumCapacity": null,
        "doNotRunExtensionsOnOverprovisionedVMs": false,
        "etag": "\"12\"",
        "extendedLocation": null,
        "hostGroup": null,
        "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Compute/virtualMachineScaleSets/aks-nodepool1-33618874-vmss",
        "identity": {
          "principalId": null,
          "tenantId": null,
          "type": "UserAssigned",
          "userAssignedIdentities": {
            "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aks-dns-ex1-agentpool": {
              "clientId": "32e6a8cd-2a5a-4fe6-93e3-9963934262d2",
              "principalId": "51891b49-6f2a-45bc-ba59-7e9f1a1b4831"
            }
          }
        },
        "location": "canadacentral",
        "name": "aks-nodepool1-33618874-vmss",
        "orchestrationMode": "Uniform",
        "overprovision": false,
        "plan": null,
        "platformFaultDomainCount": 1,
        "priorityMixPolicy": null,
        "provisioningState": "Succeeded",
        "proximityPlacementGroup": null,
        "resiliencyPolicy": null,
        "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral",
        "scaleInPolicy": null,
        "scheduledEventsPolicy": null,
        "singlePlacementGroup": false,
        "sku": {
          "capacity": 2,
          "name": "standard_d2s_v3",
          "tier": "Standard"
        },
        "skuProfile": null,
        "spotRestorePolicy": null,
        "tags": {
          "aks-managed-bootstrap-profile-acr-name": "",
          "aks-managed-consolidated-additional-properties": "b0a1b5f8-98ba-11f0-8d4c-e6fa30193ecb",
          "aks-managed-createOperationID": "98d6f7a7-6700-4837-8988-b19e39115ad7",
          "aks-managed-creationSource": "vmssclient-aks-nodepool1-33618874-vmss",
          "aks-managed-enable-imds-restriction": "false",
          "aks-managed-kubeletIdentityClientID": "32e6a8cd-2a5a-4fe6-93e3-9963934262d2",
          "aks-managed-networkisolated-outbound-type": "",
          "aks-managed-orchestrator": "Kubernetes:1.32.7",
          "aks-managed-poolName": "nodepool1",
          "aks-managed-resourceNameSuffix": "36334887",
          "aks-managed-ssh-access": "LocalUser"
        },
        "timeCreated": "2025-09-23T20:21:40.961979+00:00",
        "type": "Microsoft.Compute/virtualMachineScaleSets",
        "uniqueId": "537d92ca-9232-4d65-911e-af2d077ed1c9",
        "upgradePolicy": {
          "automaticOsUpgradePolicy": null,
          "mode": "Manual",
          "rollingUpgradePolicy": null
        },
        "virtualMachineProfile": {
          "applicationProfile": null,
          "billingProfile": null,
          "capacityReservation": null,
          "diagnosticsProfile": null,
          "evictionPolicy": null,
          "extensionProfile": {
            "extensions": [
              {
                "autoUpgradeMinorVersion": true,
                "enableAutomaticUpgrade": null,
                "forceUpdateTag": null,
                "id": null,
                "name": "vmssCSE",
                "protectedSettings": null,
                "protectedSettingsFromKeyVault": null,
                "provisionAfterExtensions": null,
                "provisioningState": null,
                "publisher": "Microsoft.Azure.Extensions",
                "settings": {},
                "suppressFailures": null,
                "type": null,
                "typeHandlerVersion": "2.0",
                "typePropertiesType": "CustomScript"
              },
              {
                "autoUpgradeMinorVersion": true,
                "enableAutomaticUpgrade": null,
                "forceUpdateTag": null,
                "id": null,
                "name": "aks-nodepool1-33618874-vmss-AKSLinuxBilling",
                "protectedSettings": null,
                "protectedSettingsFromKeyVault": null,
                "provisionAfterExtensions": null,
                "provisioningState": null,
                "publisher": "Microsoft.AKS",
                "settings": {},
                "suppressFailures": null,
                "type": null,
                "typeHandlerVersion": "1.0",
                "typePropertiesType": "Compute.AKS.Linux.Billing"
              },
              {
                "autoUpgradeMinorVersion": false,
                "enableAutomaticUpgrade": null,
                "forceUpdateTag": null,
                "id": null,
                "name": "AKSLinuxExtension",
                "protectedSettings": null,
                "protectedSettingsFromKeyVault": null,
                "provisionAfterExtensions": null,
                "provisioningState": null,
                "publisher": "Microsoft.AKS",
                "settings": {
                  "disable-uu": "true",
                  "enable-uu": "false",
                  "node-exporter-tls": "false"
                },
                "suppressFailures": false,
                "type": null,
                "typeHandlerVersion": "1.336",
                "typePropertiesType": "Compute.AKS.Linux.AKSNode"
              }
            ],
            "extensionsTimeBudget": "PT16M"
          },
          "hardwareProfile": null,
          "licenseType": null,
          "networkProfile": {
            "healthProbe": null,
            "networkApiVersion": null,
            "networkInterfaceConfigurations": [
              {
                "auxiliaryMode": null,
                "auxiliarySku": null,
                "deleteOption": null,
                "disableTcpStateTracking": false,
                "dnsSettings": {
                  "dnsServers": []
                },
                "enableAcceleratedNetworking": true,
                "enableFpga": null,
                "enableIpForwarding": false,
                "ipConfigurations": [
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": [
                      {
                        "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/loadBalancers/kubernetes/backendAddressPools/aksOutboundBackendPool",
                        "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral"
                      },
                      {
                        "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/loadBalancers/kubernetes/backendAddressPools/kubernetes",
                        "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral"
                      }
                    ],
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig1",
                    "primary": true,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig2",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig3",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig4",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig5",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig6",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig7",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig8",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig9",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig10",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig11",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig12",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig13",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig14",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig15",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig16",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig17",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig18",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig19",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig20",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig21",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig22",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig23",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig24",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig25",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig26",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig27",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig28",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  },
                  {
                    "applicationGatewayBackendAddressPools": null,
                    "applicationSecurityGroups": null,
                    "loadBalancerBackendAddressPools": null,
                    "loadBalancerInboundNatPools": null,
                    "name": "ipconfig29",
                    "primary": null,
                    "privateIpAddressVersion": "IPv4",
                    "publicIpAddressConfiguration": null,
                    "subnet": {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                      "resourceGroup": "vnet-aks-dns-ex1-rg"
                    }
                  }
                ],
                "name": "aks-nodepool1-33618874-vmss",
                "networkSecurityGroup": {
                  "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-36334887-nsg",
                  "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral"
                },
                "primary": true
              }
            ]
          },
          "osProfile": {
            "adminPassword": null,
            "adminUsername": "azureuser",
            "allowExtensionOperations": true,
            "computerNamePrefix": "aks-nodepool1-33618874-vmss",
            "customData": null,
            "linuxConfiguration": {
              "disablePasswordAuthentication": true,
              "enableVmAgentPlatformUpdates": null,
              "patchSettings": null,
              "provisionVmAgent": true,
              "ssh": {
                "publicKeys": [
                  {
                    "keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCuiZzLCABxleengZWv+2BOq++og5JqTIhT8Fpc/sGO+s7J+SD7hG/dFq+GSq63FivzBD2lomNewCtLFfbZxl+9Cy4nooGhuwoXXhSQQRrZJ30XDNC6TVggQorjt5malJxXfKBZkP1V2KiI5ICrIyewQ0XTr5tyPB4EgZtvQYtvLQeI9WGLbPEDdGy3Bsau/G/P+x34Gbk53pMw2+p/kIkge5yN7uG5I8qsI/cDvW1R+rJrAGYmUY4VnF8qafNZoxhejRXGHZjMPIZSWdPRkRg9+A4eFStNEGbbUbkrjKTZQIO7ZGe3vyvJLaXTiY+cIyMBvjxQhdjXYiCPy0jI+Nr9TFQNvO4dzmQaTwjBBvjXFTkhGMRYhv0dVPh95Wuv+8fz7JIV6AIVQQPkHDpcip9/s9P11kLgelTWF9NYmHw1h4q3iVfgLj4O2w3lh7qATlFxGEtMUtqnothkqAuZ6TVakNZ7AF0kaYr6HuWeKTgXZcof6Pd8UjxQuffseS+X9juC+mn+9S0wPUvrrgGkL9OGPMU8kqp1igMWgM/qwRuxJgX6BSqn2nbH1bHbYF9ENZJiXlBGA/oK3fHVOADFxyX7toegEj/4zEvFG6w1UEGhSxsQlMWTeA2kR8P9qzFVyQ+wfPHdQZq10x6ucmDb7kztd3PT9Kd4Y67/jhJWTE0A7Q==\n",
                    "path": "/home/azureuser/.ssh/authorized_keys"
                  }
                ]
              }
            },
            "requireGuestProvisionSignal": true,
            "secrets": [],
            "windowsConfiguration": null
          },
          "priority": null,
          "scheduledEventsProfile": null,
          "securityPostureReference": null,
          "securityProfile": null,
          "serviceArtifactReference": null,
          "storageProfile": {
            "dataDisks": null,
            "diskControllerType": "SCSI",
            "imageReference": {
              "communityGalleryImageId": null,
              "exactVersion": null,
              "id": "/subscriptions/109a5e88-712a-48ae-9078-9ca8b3c81345/resourceGroups/AKS-Ubuntu/providers/Microsoft.Compute/galleries/AKSUbuntu/images/2204gen2containerd/versions/202508.20.1",
              "offer": null,
              "publisher": null,
              "resourceGroup": "AKS-Ubuntu",
              "sharedGalleryImageId": null,
              "sku": null,
              "version": null
            },
            "osDisk": {
              "caching": "ReadOnly",
              "createOption": "FromImage",
              "deleteOption": null,
              "diffDiskSettings": null,
              "diskSizeGb": 128,
              "image": null,
              "managedDisk": {
                "diskEncryptionSet": null,
                "securityProfile": null,
                "storageAccountType": "Premium_LRS"
              },
              "name": null,
              "osType": "Linux",
              "vhdContainers": null,
              "writeAcceleratorEnabled": null
            }
          },
          "timeCreated": "2025-09-23T20:23:33.377531+00:00",
          "userData": null
        },
        "zonalPlatformFaultDomainAlignMode": null,
        "zoneBalance": null,
        "zones": null
      }
    ],
    "nsgConfiguration": {
      "subnetNsgs": [
        {
          "subnetId": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
          "subnetName": "aks-subnet",
          "nsgId": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral",
          "nsgName": "aks-vnet-aks-subnet-nsg-canadacentral",
          "rules": [],
          "defaultRules": [
            {
              "access": "Allow",
              "description": "Allow inbound traffic from all VMs in VNET",
              "destinationAddressPrefix": "VirtualNetwork",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"858e398d-1b10-46f1-a306-1763e02cdea4\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/AllowVnetInBound",
              "name": "AllowVnetInBound",
              "priority": 65000,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-aks-dns-ex1-rg",
              "sourceAddressPrefix": "VirtualNetwork",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow inbound traffic from azure load balancer",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"858e398d-1b10-46f1-a306-1763e02cdea4\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/AllowAzureLoadBalancerInBound",
              "name": "AllowAzureLoadBalancerInBound",
              "priority": 65001,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-aks-dns-ex1-rg",
              "sourceAddressPrefix": "AzureLoadBalancer",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Deny",
              "description": "Deny all inbound traffic",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"858e398d-1b10-46f1-a306-1763e02cdea4\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/DenyAllInBound",
              "name": "DenyAllInBound",
              "priority": 65500,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-aks-dns-ex1-rg",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow outbound traffic from all VMs to all VMs in VNET",
              "destinationAddressPrefix": "VirtualNetwork",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"858e398d-1b10-46f1-a306-1763e02cdea4\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/AllowVnetOutBound",
              "name": "AllowVnetOutBound",
              "priority": 65000,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-aks-dns-ex1-rg",
              "sourceAddressPrefix": "VirtualNetwork",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow outbound traffic from all VMs to Internet",
              "destinationAddressPrefix": "Internet",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"858e398d-1b10-46f1-a306-1763e02cdea4\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/AllowInternetOutBound",
              "name": "AllowInternetOutBound",
              "priority": 65001,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-aks-dns-ex1-rg",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Deny",
              "description": "Deny all outbound traffic",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"858e398d-1b10-46f1-a306-1763e02cdea4\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-aks-dns-ex1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/DenyAllOutBound",
              "name": "DenyAllOutBound",
              "priority": 65500,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-aks-dns-ex1-rg",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            }
          ]
        }
      ],
      "nicNsgs": [
        {
          "vmssName": "aks-nodepool1-33618874-vmss",
          "nicName": "aks-nodepool1-33618874-vmss",
          "nsgId": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-36334887-nsg",
          "nsgName": "aks-agentpool-36334887-nsg",
          "rules": [],
          "defaultRules": [
            {
              "access": "Allow",
              "description": "Allow inbound traffic from all VMs in VNET",
              "destinationAddressPrefix": "VirtualNetwork",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"7ff1f2e3-fdbe-47e3-bc7b-887345809f69\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-36334887-nsg/defaultSecurityRules/AllowVnetInBound",
              "name": "AllowVnetInBound",
              "priority": 65000,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral",
              "sourceAddressPrefix": "VirtualNetwork",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow inbound traffic from azure load balancer",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"7ff1f2e3-fdbe-47e3-bc7b-887345809f69\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-36334887-nsg/defaultSecurityRules/AllowAzureLoadBalancerInBound",
              "name": "AllowAzureLoadBalancerInBound",
              "priority": 65001,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral",
              "sourceAddressPrefix": "AzureLoadBalancer",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Deny",
              "description": "Deny all inbound traffic",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"7ff1f2e3-fdbe-47e3-bc7b-887345809f69\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-36334887-nsg/defaultSecurityRules/DenyAllInBound",
              "name": "DenyAllInBound",
              "priority": 65500,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow outbound traffic from all VMs to all VMs in VNET",
              "destinationAddressPrefix": "VirtualNetwork",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"7ff1f2e3-fdbe-47e3-bc7b-887345809f69\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-36334887-nsg/defaultSecurityRules/AllowVnetOutBound",
              "name": "AllowVnetOutBound",
              "priority": 65000,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral",
              "sourceAddressPrefix": "VirtualNetwork",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow outbound traffic from all VMs to Internet",
              "destinationAddressPrefix": "Internet",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"7ff1f2e3-fdbe-47e3-bc7b-887345809f69\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-36334887-nsg/defaultSecurityRules/AllowInternetOutBound",
              "name": "AllowInternetOutBound",
              "priority": 65001,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Deny",
              "description": "Deny all outbound traffic",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"7ff1f2e3-fdbe-47e3-bc7b-887345809f69\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-36334887-nsg/defaultSecurityRules/DenyAllOutBound",
              "name": "DenyAllOutBound",
              "priority": 65500,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-dns-ex1-rg_aks-dns-ex1_canadacentral",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            }
          ]
        }
      ],
      "requiredRules": {
        "outbound": [
          {
            "name": "AKS_Registry_Access",
            "protocol": "TCP",
            "destination": "MicrosoftContainerRegistry",
            "ports": [
              "443"
            ],
            "description": "Access to Microsoft Container Registry"
          },
          {
            "name": "AKS_Azure_Management",
            "protocol": "TCP",
            "destination": "AzureCloud",
            "ports": [
              "443"
            ],
            "description": "Azure management endpoints"
          },
          {
            "name": "AKS_DNS",
            "protocol": "UDP",
            "destination": "*",
            "ports": [
              "53"
            ],
            "description": "DNS resolution"
          },
          {
            "name": "AKS_NTP",
            "protocol": "UDP",
            "destination": "*",
            "ports": [
              "123"
            ],
            "description": "Network Time Protocol"
          },
          {
            "name": "AKS_API_Server_Access",
            "protocol": "TCP",
            "destination": "*",
            "ports": [
              "443"
            ],
            "description": "Access to AKS API server"
          }
        ],
        "inbound": [
          {
            "name": "AKS_Inter_Node_Communication",
            "protocol": "*",
            "source": "VirtualNetwork",
            "ports": [
              "*"
            ],
            "description": "Communication between cluster nodes"
          },
          {
            "name": "AKS_Load_Balancer",
            "protocol": "*",
            "source": "AzureLoadBalancer",
            "ports": [
              "*"
            ],
            "description": "Azure Load Balancer health probes"
          }
        ]
      },
      "blockingRules": [],
      "interNodeCommunication": {
        "status": "ok",
        "issues": []
      }
    },
    "routingAnalysis": {
      "outboundType": "loadBalancer",
      "udrAnalysis": null
    }
  },
  "diagnostics": {
    "apiConnectivityProbe": {
      "enabled": true,
      "tests": [
        {
          "test_name": "API Server DNS Resolution",
          "description": "Resolve API server FQDN to IP address",
          "command": "nslookup aks-dns-ex1-14ek0qag.hcp.canadacentral.azmk8s.io",
          "vmss_name": "aks-nodepool1-33618874-vmss",
          "instance_id": "6",
          "computer_name": "aks-nodepool1-33618874-vmss000006",
          "status": "passed",
          "stdout": "Server:\t\t168.63.129.16\nAddress:\t168.63.129.16#53\n\nNon-authoritative answer:\nName:\taks-dns-ex1-14ek0qag.hcp.canadacentral.azmk8s.io\nAddress: 20.200.102.193",
          "stderr": "",
          "exit_code": 0,
          "analysis": "Test completed successfully",
          "critical": true
        },
        {
          "test_name": "API Server TCP Connectivity",
          "description": "Test TCP connection to API server on port 443",
          "command": "nc -zv -w 5 aks-dns-ex1-14ek0qag.hcp.canadacentral.azmk8s.io 443",
          "vmss_name": "aks-nodepool1-33618874-vmss",
          "instance_id": "6",
          "computer_name": "aks-nodepool1-33618874-vmss000006",
          "status": "passed",
          "stdout": "",
          "stderr": "Connection to aks-dns-ex1-14ek0qag.hcp.canadacentral.azmk8s.io (20.200.102.193) 443 port [tcp/https] succeeded!",
          "exit_code": 0,
          "analysis": "Test completed successfully",
          "critical": true
        },
        {
          "test_name": "API Server HTTPS Connectivity",
          "description": "Test HTTPS connection to API server",
          "command": "curl -k -s -o /dev/null -w '%{http_code}' --connect-timeout 10 https://aks-dns-ex1-14ek0qag.hcp.canadacentral.azmk8s.io:443",
          "vmss_name": "aks-nodepool1-33618874-vmss",
          "instance_id": "6",
          "computer_name": "aks-nodepool1-33618874-vmss000006",
          "status": "passed",
          "stdout": "401",
          "stderr": "",
          "exit_code": 0,
          "analysis": "Test completed successfully",
          "critical": true
        },
        {
          "test_name": "Internet Connectivity",
          "description": "Test outbound internet connectivity",
          "command": "curl -s -o /dev/null -w '%{http_code}' --connect-timeout 10 https://www.microsoft.com",
          "vmss_name": "aks-nodepool1-33618874-vmss",
          "instance_id": "6",
          "computer_name": "aks-nodepool1-33618874-vmss000006",
          "status": "passed",
          "stdout": "200",
          "stderr": "",
          "exit_code": 0,
          "analysis": "Test completed successfully",
          "critical": false
        }
      ],
      "summary": {
        "total_tests": 4,
        "passed": 4,
        "failed": 0,
        "errors": 0
      }
    },
    "failureAnalysis": {
      "enabled": false
    },
    "findings": [
      {
        "severity": "warning",
        "code": "DNS_RESOLUTION_FAILED",
        "message": "VNet is using custom DNS servers (1.1.1.1, 8.8.8.8) which may impact CoreDNS functionality",
        "recommendation": "Custom DNS servers should forward Azure service queries to Azure DNS (168.63.129.16). Current DNS servers: 168.63.129.16, 1.1.1.1, 8.8.8.8. If experiencing DNS resolution issues, verify that:\n1. Custom DNS can reach Azure DNS (168.63.129.16)\n2. Azure-specific domains are forwarded correctly\n3. DNS forwarding is configured for '*.azmk8s.io' and other Azure services",
        "details": {
          "vnetName": "aks-vnet",
          "vnetResourceGroup": "vnet-aks-dns-ex1-rg",
          "customDnsServers": [
            "1.1.1.1",
            "8.8.8.8"
          ],
          "hasAzureDns": true
        }
      }
    ]
  }
}