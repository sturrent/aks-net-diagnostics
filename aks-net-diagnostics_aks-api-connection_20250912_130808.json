{
  "metadata": {
    "timestamp": "2025-09-12T19:08:33.307344Z",
    "version": "2.0",
    "generatedBy": "AKS Network Diagnostics Script (Python)"
  },
  "cluster": {
    "name": "aks-api-connection",
    "resourceGroup": "aks-api-connection-lab1-rg",
    "subscription": "18fcfcaf-51b0-42c1-91ba-b14fe22f59dd",
    "provisioningState": "Failed",
    "location": "canadacentral",
    "nodeResourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral",
    "networkProfile": {
      "advancedNetworking": null,
      "dnsServiceIp": "10.0.0.10",
      "ipFamilies": [
        "IPv4"
      ],
      "kubeProxyConfig": null,
      "loadBalancerProfile": {
        "allocatedOutboundPorts": null,
        "backendPoolType": "nodeIPConfiguration",
        "clusterServiceLoadBalancerHealthProbeMode": null,
        "effectiveOutboundIPs": [
          {
            "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/publicIPAddresses/d88d92b8-c7c3-4237-b2b3-0269ab707dc4",
            "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral"
          }
        ],
        "enableMultipleStandardLoadBalancers": null,
        "idleTimeoutInMinutes": null,
        "managedOutboundIPs": {
          "count": 1,
          "countIpv6": null
        },
        "outboundIPs": null,
        "outboundIpPrefixes": null
      },
      "loadBalancerSku": "standard",
      "natGatewayProfile": null,
      "networkDataplane": "azure",
      "networkMode": null,
      "networkPlugin": "azure",
      "networkPluginMode": null,
      "networkPolicy": "none",
      "outboundType": "loadBalancer",
      "podCidr": null,
      "podCidrs": null,
      "podLinkLocalAccess": "IMDS",
      "serviceCidr": "10.0.0.0/16",
      "serviceCidrs": [
        "10.0.0.0/16"
      ],
      "staticEgressGatewayProfile": null
    },
    "apiServerAccess": {
      "authorizedIpRanges": null,
      "disableRunCommand": null,
      "enablePrivateCluster": true,
      "enablePrivateClusterPublicFqdn": true,
      "enableVnetIntegration": null,
      "privateDnsZone": "system",
      "subnetId": null
    }
  },
  "networking": {
    "vnets": [
      {
        "name": "aks-vnet",
        "resourceGroup": "vnet-api-connection-lab1-rg",
        "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet",
        "addressSpace": [
          "10.2.0.0/16"
        ],
        "subnets": [],
        "peerings": [
          {
            "name": "aks-to-dns",
            "remoteVirtualNetwork": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/dnsserver-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/dnsVnet",
            "peeringState": "Connected",
            "allowVirtualNetworkAccess": true,
            "allowForwardedTraffic": true,
            "allowGatewayTransit": false,
            "useRemoteGateways": false
          }
        ]
      }
    ],
    "outbound": {
      "type": "loadBalancer",
      "configuredPublicIPs": [
        "4.174.255.41"
      ],
      "effectiveOutbound": {
        "mechanism": "loadBalancer",
        "overridden_by_udr": false,
        "effective_mechanism": "loadBalancer",
        "virtual_appliance_ips": [],
        "load_balancer_ips": [
          "4.174.255.41"
        ],
        "warnings": [],
        "description": "Traffic uses Load Balancer with public IP(s): 4.174.255.41"
      },
      "udrAnalysis": null
    },
    "privateDns": {
      "type": "system",
      "privateDnsZone": "system",
      "analysis": "System-managed private DNS zone"
    },
    "apiServerAccess": {
      "privateCluster": true,
      "authorizedIpRanges": null,
      "disableRunCommand": null,
      "analysis": {
        "ipRangeRestriction": "none"
      },
      "securityFindings": [],
      "accessRestrictions": {
        "model": "private",
        "description": "Private cluster - API server only accessible from VNet",
        "implications": [
          "\u2705 API server is isolated from the internet",
          "\u2705 Access only from resources within the VNet or peered networks",
          "\ud83d\udcdd Requires VPN or ExpressRoute for external access",
          "\ud83d\udcdd Private DNS zone required for name resolution"
        ]
      }
    },
    "vmssConfiguration": [
      {
        "name": "aks-nodepool1-41624625-vmss",
        "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral",
        "networkProfile": {
          "healthProbe": null,
          "networkApiVersion": null,
          "networkInterfaceConfigurations": [
            {
              "auxiliaryMode": null,
              "auxiliarySku": null,
              "deleteOption": null,
              "disableTcpStateTracking": false,
              "dnsSettings": {
                "dnsServers": []
              },
              "enableAcceleratedNetworking": false,
              "enableFpga": null,
              "enableIpForwarding": false,
              "ipConfigurations": [
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": [
                    {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/loadBalancers/kubernetes/backendAddressPools/aksOutboundBackendPool",
                      "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral"
                    },
                    {
                      "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/loadBalancers/kubernetes/backendAddressPools/kubernetes",
                      "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral"
                    }
                  ],
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig1",
                  "primary": true,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig2",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig3",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig4",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig5",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig6",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig7",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig8",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig9",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig10",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig11",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig12",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig13",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig14",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig15",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig16",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig17",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig18",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig19",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig20",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig21",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig22",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig23",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig24",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig25",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig26",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig27",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig28",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                },
                {
                  "applicationGatewayBackendAddressPools": null,
                  "applicationSecurityGroups": null,
                  "loadBalancerBackendAddressPools": null,
                  "loadBalancerInboundNatPools": null,
                  "name": "ipconfig29",
                  "primary": null,
                  "privateIpAddressVersion": "IPv4",
                  "publicIpAddressConfiguration": null,
                  "subnet": {
                    "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
                    "resourceGroup": "vnet-api-connection-lab1-rg"
                  }
                }
              ],
              "name": "aks-nodepool1-41624625-vmss",
              "networkSecurityGroup": {
                "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-34331157-nsg",
                "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral"
              },
              "primary": true
            }
          ]
        }
      }
    ],
    "nsgConfiguration": {
      "subnetNsgs": [
        {
          "subnetId": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/virtualNetworks/aks-vnet/subnets/aks-subnet",
          "subnetName": "aks-subnet",
          "nsgId": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral",
          "nsgName": "aks-vnet-aks-subnet-nsg-canadacentral",
          "rules": [],
          "defaultRules": [
            {
              "access": "Allow",
              "description": "Allow inbound traffic from all VMs in VNET",
              "destinationAddressPrefix": "VirtualNetwork",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"3d5dffba-2d94-480a-b323-15db751fee36\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/AllowVnetInBound",
              "name": "AllowVnetInBound",
              "priority": 65000,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-api-connection-lab1-rg",
              "sourceAddressPrefix": "VirtualNetwork",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow inbound traffic from azure load balancer",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"3d5dffba-2d94-480a-b323-15db751fee36\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/AllowAzureLoadBalancerInBound",
              "name": "AllowAzureLoadBalancerInBound",
              "priority": 65001,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-api-connection-lab1-rg",
              "sourceAddressPrefix": "AzureLoadBalancer",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Deny",
              "description": "Deny all inbound traffic",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"3d5dffba-2d94-480a-b323-15db751fee36\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/DenyAllInBound",
              "name": "DenyAllInBound",
              "priority": 65500,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-api-connection-lab1-rg",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow outbound traffic from all VMs to all VMs in VNET",
              "destinationAddressPrefix": "VirtualNetwork",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"3d5dffba-2d94-480a-b323-15db751fee36\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/AllowVnetOutBound",
              "name": "AllowVnetOutBound",
              "priority": 65000,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-api-connection-lab1-rg",
              "sourceAddressPrefix": "VirtualNetwork",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow outbound traffic from all VMs to Internet",
              "destinationAddressPrefix": "Internet",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"3d5dffba-2d94-480a-b323-15db751fee36\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/AllowInternetOutBound",
              "name": "AllowInternetOutBound",
              "priority": 65001,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-api-connection-lab1-rg",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Deny",
              "description": "Deny all outbound traffic",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"3d5dffba-2d94-480a-b323-15db751fee36\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/vnet-api-connection-lab1-rg/providers/Microsoft.Network/networkSecurityGroups/aks-vnet-aks-subnet-nsg-canadacentral/defaultSecurityRules/DenyAllOutBound",
              "name": "DenyAllOutBound",
              "priority": 65500,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "vnet-api-connection-lab1-rg",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            }
          ]
        }
      ],
      "nicNsgs": [
        {
          "vmssName": "aks-nodepool1-41624625-vmss",
          "nicName": "aks-nodepool1-41624625-vmss",
          "nsgId": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-34331157-nsg",
          "nsgName": "aks-agentpool-34331157-nsg",
          "rules": [],
          "defaultRules": [
            {
              "access": "Allow",
              "description": "Allow inbound traffic from all VMs in VNET",
              "destinationAddressPrefix": "VirtualNetwork",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"8fa24b86-6737-468e-a20b-bcb682e543e6\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-34331157-nsg/defaultSecurityRules/AllowVnetInBound",
              "name": "AllowVnetInBound",
              "priority": 65000,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral",
              "sourceAddressPrefix": "VirtualNetwork",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow inbound traffic from azure load balancer",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"8fa24b86-6737-468e-a20b-bcb682e543e6\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-34331157-nsg/defaultSecurityRules/AllowAzureLoadBalancerInBound",
              "name": "AllowAzureLoadBalancerInBound",
              "priority": 65001,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral",
              "sourceAddressPrefix": "AzureLoadBalancer",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Deny",
              "description": "Deny all inbound traffic",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Inbound",
              "etag": "W/\"8fa24b86-6737-468e-a20b-bcb682e543e6\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-34331157-nsg/defaultSecurityRules/DenyAllInBound",
              "name": "DenyAllInBound",
              "priority": 65500,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow outbound traffic from all VMs to all VMs in VNET",
              "destinationAddressPrefix": "VirtualNetwork",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"8fa24b86-6737-468e-a20b-bcb682e543e6\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-34331157-nsg/defaultSecurityRules/AllowVnetOutBound",
              "name": "AllowVnetOutBound",
              "priority": 65000,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral",
              "sourceAddressPrefix": "VirtualNetwork",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Allow",
              "description": "Allow outbound traffic from all VMs to Internet",
              "destinationAddressPrefix": "Internet",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"8fa24b86-6737-468e-a20b-bcb682e543e6\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-34331157-nsg/defaultSecurityRules/AllowInternetOutBound",
              "name": "AllowInternetOutBound",
              "priority": 65001,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            },
            {
              "access": "Deny",
              "description": "Deny all outbound traffic",
              "destinationAddressPrefix": "*",
              "destinationAddressPrefixes": [],
              "destinationPortRange": "*",
              "destinationPortRanges": [],
              "direction": "Outbound",
              "etag": "W/\"8fa24b86-6737-468e-a20b-bcb682e543e6\"",
              "id": "/subscriptions/18fcfcaf-51b0-42c1-91ba-b14fe22f59dd/resourceGroups/MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral/providers/Microsoft.Network/networkSecurityGroups/aks-agentpool-34331157-nsg/defaultSecurityRules/DenyAllOutBound",
              "name": "DenyAllOutBound",
              "priority": 65500,
              "protocol": "*",
              "provisioningState": "Succeeded",
              "resourceGroup": "MC_aks-api-connection-lab1-rg_aks-api-connection_canadacentral",
              "sourceAddressPrefix": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*",
              "sourcePortRanges": [],
              "type": "Microsoft.Network/networkSecurityGroups/defaultSecurityRules"
            }
          ]
        }
      ],
      "requiredRules": {
        "outbound": [
          {
            "name": "AKS_Registry_Access",
            "protocol": "TCP",
            "destination": "MicrosoftContainerRegistry",
            "ports": [
              "443"
            ],
            "description": "Access to Microsoft Container Registry"
          },
          {
            "name": "AKS_Azure_Management",
            "protocol": "TCP",
            "destination": "AzureCloud",
            "ports": [
              "443"
            ],
            "description": "Azure management endpoints"
          },
          {
            "name": "AKS_DNS",
            "protocol": "UDP",
            "destination": "*",
            "ports": [
              "53"
            ],
            "description": "DNS resolution"
          },
          {
            "name": "AKS_NTP",
            "protocol": "UDP",
            "destination": "*",
            "ports": [
              "123"
            ],
            "description": "Network Time Protocol"
          }
        ],
        "inbound": [
          {
            "name": "AKS_Inter_Node_Communication",
            "protocol": "*",
            "source": "VirtualNetwork",
            "ports": [
              "*"
            ],
            "description": "Communication between cluster nodes"
          },
          {
            "name": "AKS_Load_Balancer",
            "protocol": "*",
            "source": "AzureLoadBalancer",
            "ports": [
              "*"
            ],
            "description": "Azure Load Balancer health probes"
          }
        ]
      },
      "missingRules": [],
      "blockingRules": [],
      "interNodeCommunication": {
        "status": "ok",
        "issues": []
      }
    },
    "routingAnalysis": {
      "outboundType": "loadBalancer",
      "udrAnalysis": null
    }
  },
  "diagnostics": {
    "apiConnectivityProbe": null,
    "failureAnalysis": {
      "enabled": false
    },
    "findings": [
      {
        "severity": "critical",
        "code": "CLUSTER_OPERATION_FAILURE",
        "message": "Cluster failed with error: VMExtensionProvisioningError: CSE failed with 'VMExtensionError_K8SAPIServerDNSLookupFail', which means agents are unable to resolve Kubernetes API server name. It's likely custom DNS server is not correctly configured, please see https://aka.ms/aks/vmextensionerror_k8sapiserverdnslookupfail and https://aka.ms/aks/private-cluster#hub-and-spoke-with-custom-dns for more information.",
        "error_code": "VMExtensionProvisioningError",
        "recommendation": "Check Azure Activity Log for detailed failure information and contact Azure support if needed"
      },
      {
        "severity": "critical",
        "code": "NODE_POOL_FAILURE",
        "message": "Node pools in failed state: nodepool1",
        "recommendation": "Check node pool configuration and Azure Activity Log for detailed failure information"
      },
      {
        "severity": "critical",
        "code": "PDNS_DNS_HOST_VNET_LINK_MISSING",
        "message": "DNS server 10.1.0.10 is hosted in VNet dnsVnet but this VNet is not linked to private DNS zone e04358b2-6d06-4895-b09b-b1575d934e69.privatelink.canadacentral.azmk8s.io. Cluster VNet aks-vnet uses this DNS server.",
        "recommendation": "Link VNet dnsVnet to private DNS zone e04358b2-6d06-4895-b09b-b1575d934e69.privatelink.canadacentral.azmk8s.io to ensure proper DNS resolution for the private cluster"
      }
    ]
  }
}